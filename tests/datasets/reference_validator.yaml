dataset:
    name: "Reference Validator Dataset"
    description: "Test cases for validating bibliography references via web presence"
    test_config:
      # Strictly compare stable scalars only
      strict_fields:
        reference_validations:
          __all__:
            - original_reference
            - valid_reference
      # Let the LLM semantically compare nested validations and suggested actions
      llm_fields:
        reference_validations:
          __all__:
            - bibliography_field_validations.category
            - bibliography_field_validations.problem_type
            - bibliography_field_validations.current_value
            - bibliography_field_validations.suggested_value
            - suggested_action
      run_count: 1
    items:
      - name: "valid_rand_report"
        description: "Known RAND report should validate as correct"
        input:
          domain_context: "Criminal justice and digital evidence"
          audience_context: "Criminal justice researchers"
          references:
            - text: "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson. Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence. Santa Monica, CA: RAND Corporation, 2015."
              has_associated_supporting_document: false
              index_of_associated_supporting_document: -1
              name_of_associated_supporting_document: ""
        expected_output:
          reference_validations:
            - original_reference:
                text: "Goodison, Sean E., Robert C. Davis, and Brian A. Jackson. Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence. Santa Monica, CA: RAND Corporation, 2015."
                has_associated_supporting_document: false
                index_of_associated_supporting_document: -1
                name_of_associated_supporting_document: ""
              valid_reference: true
              bibliography_field_validations:
                - category: author
                  current_value: "Sean E. Goodison; Robert C. Davis; Brian A. Jackson"
                  suggested_value: "Sean E. Goodison; Robert C. Davis; Brian A. Jackson"
                  problem_type: correct
                - category: title
                  current_value: "Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence"
                  suggested_value: "Digital Evidence and the U.S. Criminal Justice System: Identifying Technology and Other Needs to More Effectively Acquire and Utilize Digital Evidence"
                  problem_type: correct
                - category: publisher
                  current_value: "RAND Corporation"
                  suggested_value: "RAND Corporation"
                  problem_type: correct
                - category: year
                  current_value: "2015"
                  suggested_value: "2015"
                  problem_type: correct
              suggested_action: "No changes needed."
              url: "https://www.rand.org/pubs/research_reports/RR890.html"

      - name: "invalid_fabricated_reference"
        description: "Fabricated journal article should be flagged as invalid with corrective guidance"
        input:
          domain_context: "Technology and research methods"
          audience_context: "Academic researchers"
          references:
            - text: "Doe, John. The Effects of Widgets on Gadgets. Journal of Widgetry, 2020."
              has_associated_supporting_document: false
              index_of_associated_supporting_document: -1
              name_of_associated_supporting_document: ""
        expected_output:
          reference_validations:
            - original_reference:
                text: "Doe, John. The Effects of Widgets on Gadgets. Journal of Widgetry, 2020."
                has_associated_supporting_document: false
                index_of_associated_supporting_document: -1
                name_of_associated_supporting_document: ""
              valid_reference: false
              bibliography_field_validations:
                - category: author
                  current_value: "John Doe"
                  suggested_value: ""
                  problem_type: incorrect
                - category: title
                  current_value: "The Effects of Widgets on Gadgets"
                  suggested_value: ""
                  problem_type: incorrect
                - category: publisher
                  current_value: "Journal of Widgetry"
                  suggested_value: ""
                  problem_type: incorrect
                - category: year
                  current_value: "2020"
                  suggested_value: ""
                  problem_type: incorrect
              suggested_action: "Replace this fabricated reference with a real, verifiable source or remove it."
              url: ""

      - name: "wrong_year_known_source"
        description: "Known RAND report with incorrect year should be partially corrected and marked invalid"
        input:
          domain_context: "Digital evidence and law enforcement"
          audience_context: "Policy researchers"
          references:
            - text: "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson. Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers. Santa Monica, CA: RAND Corporation, 2019."
              has_associated_supporting_document: false
              index_of_associated_supporting_document: -1
              name_of_associated_supporting_document: ""
        expected_output:
          reference_validations:
            - original_reference:
                text: "Vermeer, Michael J. D., Dulani Woods, and Brian A. Jackson. Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers. Santa Monica, CA: RAND Corporation, 2019."
                has_associated_supporting_document: false
                index_of_associated_supporting_document: -1
                name_of_associated_supporting_document: ""
              valid_reference: false
              bibliography_field_validations:
                - category: author
                  current_value: "Michael J. D. Vermeer; Dulani Woods; Brian A. Jackson"
                  suggested_value: "Michael J. D. Vermeer; Dulani Woods; Brian A. Jackson"
                  problem_type: correct
                - category: title
                  current_value: "Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers"
                  suggested_value: "Identifying Law Enforcement Needs for Access to Digital Evidence in Remote Data Centers"
                  problem_type: correct
                - category: publisher
                  current_value: "RAND Corporation"
                  suggested_value: "RAND Corporation"
                  problem_type: correct
                - category: year
                  current_value: "2019"
                  suggested_value: "2018"
                  problem_type: incorrect
              suggested_action: "Update the publication year to 2018 to match the official RAND report."
              url: "https://www.rand.org/pubs/research_reports/RR2240.html"

